# Simple Telegram Queue Bot

Упрощенная версия бота для записи на приём через Telegram.

## Особенности

- Минималистичная архитектура (~1000 строк кода)
- Прямой доступ к SQLite без лишних абстракций
- Простая конфигурация через переменные окружения
- **Обязательная регистрация пользователей с номером телефона**
- Автоматическая регистрация команд в меню Telegram
- Базовые команды: /start, /book, /myslots, /cancel, /help, /admin
- Обработка callback queries для интерактивных кнопок
- Защита от неавторизованного бронирования
- Docker-ready

## Установка

1. Клонировать репозиторий
2. Скопировать `.env.example` в `.env` и заполнить своими значениями
3. Установить зависимости: `go mod download`
4. Запустить: `make run` (локально) или `make docker-run` (в Docker)

## Структура

```
├── main.go        # Основная логика и хендлеры (521 строк)
├── config.go      # Конфигурация с .env загрузкой (90 строк)
├── database.go    # Прямые SQL операции + управление пользователями (378 строк)
├── middleware.go  # Простой middleware (75 строк)
├── Dockerfile     # Простой multi-stage build
└── Makefile       # Основные команды
```

## Команды

- `make build` - собрать бинарник
- `make run` - запустить локально
- `make docker-build` - собрать Docker образ
- `make docker-run` - запустить в Docker

## Что было упрощено

1. **Убран repository pattern** - прямые SQL запросы
2. **Удалены лишние абстракции** - один файл с хендлерами
3. **Упрощена конфигурация** - плоская структура с загрузкой из .env
4. **Убраны метрики** - только базовое логирование
5. **Минимальный Docker** - один контейнер без оркестрации

## Зависимости

- `github.com/go-telegram-bot-api/telegram-bot-api/v5` - Telegram Bot API
- `github.com/mattn/go-sqlite3` - SQLite драйвер
- `github.com/joho/godotenv` - загрузка переменных из .env файла
